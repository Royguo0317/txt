###  [:house:返回首頁](https://github.com/ourhimalayas/txt)
---

## 比特币的交易结构——如何更安全使用数字币支付
` DT` [轉載自GNews](https://gnews.org/zh-hans/1063120/)

主讲: 长工Satoshi

整理:  长工Satoshi

大家好，转眼20213月底，回顾2020年度DT特戰旅金融課，一共开了5堂课

1. 反洗钱法 [https://gnews.org/zh-hans/273713/](https://gnews.org/zh-hans/273713/)

2. 记账权 [https://gnews.org/zh-hans/276116/](https://gnews.org/zh-hans/276116/)

3. 隐私和匿名 [https://gnews.org/zh-hans/281476/](https://gnews.org/zh-hans/281476/)

4. 博弈论与小世界网络 [https://gnews.org/zh-hans/287745/](https://gnews.org/zh-hans/287745/)

5. SWIFT的前世今生 [https://gnews.org/zh-hans/296722/](https://gnews.org/zh-hans/296722/)

去年上了5堂课，今年可能只上这一堂。所以，机会难得，尤为宝贵！

我把这个帖一次，大家可以当作地图。去年提了一些数字币，区块链，以及比特币的网络架构：比特币是分层的小世界网络结构，而不是多数人想象的网格状的形式。这一点，价值千金。不知道这一点，你连比特币的第一道大门都没有找到。今天主要分析一下比特币交易的结构，以及带着大家实际操作一些链上钱包，比较实用，如果分不清交易结构，你无法走远。你可能一直朦胧状态。

我们这里的交易都是标准交易，所谓标准交易，就是A给B转了一笔钱。因为比特币的脚本本身可以构造非常复杂的交易，今天讲最简单的标准转账。

今天这里讲数字币支付的交易结构，我分两类讲，比特币类和非比特币类，比如以太坊/波场类。

我今天只说皮毛，因为听众构成不单一，多数是小白，外面也太多骗子，今天的任务是教会大家操作链上钱包，原理只是给有兴趣的朋友，为你们进一步探索提供一点启发。

懂得原理，可以带你走更远！

我门先来对纸币现金交易结构肢解，这个很重要。因为比特币是点对点的电子现金系统。

大家都用过纸币的，纸币就是我们日常说的现金。出门带一个钱包，钱包里面两张100，三张50的。你钱包共有350块钱。这一点很容易懂。

今天出门很困，先买一杯咖啡提神。一杯咖啡40，喝完咖啡去买排骨。

我们今天先买咖啡。这个时候我掏钱包了，掏出来，我可以拿一张50的，或者拿一张100的。我就拿50的吧。我掏出50，咖啡40，很贵，店员找了我10块。
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-66.png)
大家注意每一个环节，你掏出50，店员收40，找零10，我们从最简单的开始。我们来“肢解”这笔交易。我们把这笔交易想成一个黑盒子。画图比较直观。

这笔交易有一笔输入，就是50， 然后输出两笔：40和10，这个是现金交易。

交易完成之后：

—&gt;你钱包里面的50块那张纸币没有了，换成了10块的, 总额还剩下310.

—&gt;咖啡店多了40块。

这个和你使用支付宝微信不同，那个是直接扣款。这个你明白吧？ 支付宝/微信是对你账户记账，你账户是记账对象。纸币现金是对你多少张钞票和每一张钞票记账，然后加起来算总额。

我们回到比特币类型的数字币

你钱包有很多不同的UTXO（俗称地址)，然后每个地址上面有钱，你钱包自动帮你确定“掏出某一张纸币现金”，完成支付之后系统自动找零到你钱包. 找零地址不是现有的地址，而是你钱包自动生成一个新的地址接收找零。

上面的纸币交易如果换成比特币类型数字币就变成下面这样：
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-68.png)
输出2这部分0.000830BSV就是找零.

这个是比特币类型的数字币支付模型，输入是某一个地址（UTXO）的全部金额，然后咖啡店的收款地址收了他该收的一部分，系统自动把找零余额打回钱包，你钱包里的UTXO地址发生了变化 （你钱包自动生成一个新的地址接收找零）

你钱包输入那个地址余额已经变成0，店家地址多了0.003456，你钱包里面多出来一个地址，上面有0.00830BSV。 这个是交易结构分析。

上面是和纸币交易相似/相同之处，和纸币唯一不同的是：

纸币面值金额基本就是固定几个，数字币每个地址的“面值”可以随意。比特币更灵活凸显任意分割。所以，比特币白皮书题目：比特币，是一种点对点的电子现金系统。我相信99%的人根本没有明白白皮书的题目。他的交易过程和模型，完全比对现金纸币，并且可以做到每一个地址只使用一次，这个模式，是对隐私的极大保护和尊重。每一张纸币现金你也只可以使用一次，对吧？

大家发现有没有，上面 我把数字币替代了人民币。就是多了一个价格换算的机制，容易理解了吧？

细心的人可能会说：长工你写错了，上面输入不等于输出总和，有问题！人民币交易的时候，输入=输出，数字币你写错了，老师写了bug

“手续费”！！！—-课堂里面反应快的同学

发现问题的朋友我认为你是极其细心的，但是我也没有写错，不见了的 0.0000340BSV，在比特币网络里是支付给矿工作为记账费/矿工费支付出去了。是付钱的人给！因为你付钱给人，你有足够动机证明你支付了，所以你付钱给矿工记账。
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-71.png)
这个是钱包里面实际的交易，我盖住了交易哈希，是为了我自己的隐私

input 就是输入， ouput就是输出，网络费就是矿工费，比如，这是一笔BSV交易，矿工费 399聪(Sat)，大约万分之八美元，0.08美分。我实际举例都是用BSV, 因为演示成本极低啊！！！

我用现金举例，是带入交易输入和交易输出的概念: Input, output，以及更好理解UTXO （Unspend Transaction Output) 是怎么回事。 可能大家偶尔听见币圈老韭菜谈起这些输入输出，但是不知道怎么回事，到这里你应该完全明白。

只有比特币类型数字币的有这些结构，完全按照现金模式进行，后面其他山寨的基本不是。
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-72.png)
如图：一笔标准交易，都是一笔输入，两笔输出。比特币类型的数字币，你发现了，完全使用了现金支付的概念，连动作和过程基本都雷同。

你的钱包可以装多少纸币？ 爱装多少装多少！！！只要装的下！

你的比特币钱包可以多少地址？ 你爱生成多少个生成多少个。 所以隐私啊！

比特币类型的，所具备的延展性是其他所谓的区块链2.0 区块链3.0不可比拟的。我举一个简单的例子：一个公司在链上给自己的股东派息，在BSV可以一笔交易完成，下面是一笔真实交易，我构造了一笔输入+七笔输出，我可以构造一万个输出。这个在其他所谓的区块链基本不可能实现：
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-73.png)
一笔输入和七笔输出，在一笔交易之下完成，手续费不到1美分。我要是用以太坊，完蛋了，手续费就可以让我破产。所谓的区块链2.0，3.0在老祖宗比特币面前，连玩具都不是，我喝口水，大家消化一下，然后我说非比特币类型的数字币。

课堂提问：

UTXO是指钱包里剩余的钱还是手续费？

答：你钱包的里面的钱。Unspend Transaction Output Unspent 就是未花费的交易输出。就是你钱包里的一个地址上的钱。类似你钱包里面的某一张纸币。

如果你懂得“带球过人”，那些所谓的链上交易数据分析，他根本无法分清你是支付给商户的还是找零回到你钱包的

说完了比特币类，我下面谈非比特币类，我用以太坊/波场为例。我直接说，节省时间

1. 他们都有底层公链和二层代币的概念；

2. 他们都采用了地址=账户的概念，非常容易理解

3. 你在银行里面的账号是一串数字，你在这里的账号是一串字母+数字；

4. 任何人都可以下载链上钱包，注册无数个账号；

5. 以太坊的二层代币目前最多的是erc20这个协议, 这个协议之下最成功的案例是USDT；

6. 波场代币目前最成功的就是trc20协议下的USDT;

7. 两者在支付USDT的时候都是燃烧底层公链的数字币(eth, trx)作为支付矿工的手续费。

同学感叹：我过去对UTXO的认识是一个极大的错误

答：你喊过多次“我终于顿悟了”，我知道，你只是摸到皮毛之后的兴奋。（当时不忍心泼冷水）

众人皆笑😀

以太坊和波场为代表的非比特币類型的区块链资产，账户=地址，一个钱包一个账户一个地址，可以匿名，但是隐私保护能力是比较弱的，地址=账户，和你支付宝/微信的账户系统类似，类似是一个不需要实名而且你自己100%掌握所有权的微信钱包。

他们大致这些要点。他们的生态建设和其他我不说了，没有意义。我说一下钱包的概念，说完了大家一起实操！

我今天把钱包分两类

第一类：链上钱包On-Chain Wallet：自己管理你的私钥，密码用来加密本地钱包，输入密码其实只是调用/解锁你的私钥来发起交易；换一个设备你密码就没用了，换一个设备你输入私钥。

谁下载过钱包自己安装，然后保存12个种子字的，可以回复“1”

我看看多少人玩过 （课堂有三位朋友表示用过）

今天所有人都实操一次！

第二类 链下钱包Off-Chain Wallet: 托管钱包，也就是他人掌握你私钥，你用提款密码发起支付，然后他们来核实是不是你，一般交易所都是。密码+谷歌2FA，有的还要增加一个邮件认证。三重。 这里面的风险在于交易所跑路，倒闭，或者被政府接管。

微信支付宝就是托管的钱包。由腾讯和阿里负责资金安全。

OKex有一段时间徐明星进去了几个月，所有私钥都在他一个人手里。所以，股东花多少钱也必须把他捞出来，要不然资产动不了, 几十亿美金呢。相比之下，李林太老实了，他进去了公司照常营业，所以没有人有动机花钱捞人，李总身体还不好。真是作孽！

火币的一号人物和二号人物目前都没有人身自由，我说这些其实就是想说明私钥的重要性，私钥就是一切。这些概念很抽象，你今天不理解不要紧，但是记住我说的就可以。

问：我可以理解为私钥即所有权么？

答：你的命根

今天我们实操三个钱包，非常具备代表性的:

以太坊钱包 MetaMASK

波场钱包 TronLink

综合类钱包 Exodus

另外介绍几个专业性较强的，有兴趣的朋友可以自己去试试，比如：

1 专业比特币钱包：Electrum

2 专业BSV钱包: ElectrumSV

3 专业XLM钱包: Solar

我推荐的钱包并不代表是绝对安全的，但是都是本人熟悉操作的，在业内都是佼佼者！

现在就下载MetaMASK, 几乎超过一半的以太坊Dapp开发者都用这个。这个钱包可以支持电脑端和手机端。现在就手机下载。 [https://metamask.io/](https://metamask.io/)

现在就动手，电脑端的模式是浏览器的extention, 你需要开启他要求的权限。

创建新的钱包，然后备份12个种子字。记下来，记在本子上，不建议拍照保存，绝对不建议。写在本子上，放到银行保险库，记住：密码忘记不可恢复。创建完成之后，可以选择“Add Token”, 输入USDT, 这个时候就是你就可以收erc20版本USDT了；
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-74.png)
你还可以选择USDC, 这个是Circle发行的美元稳定币。

如果你手机丢了怎么办？，有12个字就可以了，如果你手机被偷，或者坏掉，你重新换一部手机下载钱包，然后做如下动作。
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-75.png)
我挑要命的讲。你手机被抢了，没事！只要他不知道密码就行，回家立刻再下载一个钱包。照着上面做，就可以了。这里你只要输入正确信息就可以了。密码是新的密码，和老手机钱包密码没有关系

课堂提问：我用过比特派，也是12字密码

答: 行业里的开发者都遵循一些大家都认同的标准协议，BIP-XX之类。有12个字，有24个字，都遵从特定协议，这里我不细说。

新建钱包，恢复钱包，这些手艺你掌握了，你基本就是一根好韭菜了

提问：这个钱包有可能被人黑了，就像交易网站关门跑路么？

回答：链上钱包，不存在托管的概念。更不存在跑路的概念。你在MetaMAKSK的钱包资产，你在比特派，相同协议的钱包，比如12种子字，你可以照样导入，这类钱包公司，他们不掌握你的资产，他们就是开发了界面，让你可以交易而已。

交易所你是实名的，这里可以匿名。你交易所买完币，可以提币到自己掌握私钥的钱包里面

什么叫做私有财产神圣不可侵犯？ 这就是私有财产神圣不可侵犯。

听众感叹：我以前还担心他们后台看了我的密码，把我的那点币转跑了呢

回答：你的密码是加密了你手机钱包私钥，只在你本地设备，划重点：
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-76.png)
现在去下载TronLink 波场钱包。 波场上面的USDT 是TRC20版本的。下载安装，创建新账户。记下12个字。赶快做一下。

[https://www.tronlink.org/](https://www.tronlink.org/)

TronLink 波场，变得有必要说一下，是因为波场版本Trc20的USDT波场这个钱包和以太坊MetaMASK钱包类似。METAMASK/TRONLINK 这两个钱包非常具备代表性，我个人认为分别代表了以太坊和波场的目前轻量级钱包的巅峰之作。使用非常友好
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-77.png)
这个是波场钱包界面，波场的地址需要激活，激活就是向这个地址打0.1个TRX，你打100个也可以。

你可以用来接收USDT, 发送USDT，ERC20版本的USDT和TRC20版本的USDT不能互相打，虽然他们价值相同。你可以打进交易所，然后提币，选择你想要的版本拉提到自己对应的地址

记住：

不同协议的**USDT**不能互相打

不同协议的**USDT**不能互相打

不同协议的**USDT**不能互相打

Trc20 目前交易手续费不高，但是还是比我一开始演示的BSV高太多。我演示的那一笔交易手续费万分之八美元，TRC20 USDT 交易手续费在 2-4 波场币，大约一两毛美元。

以太坊erc20交易成本目前在10-20美元/笔这个区间，这个基本就是走向灭亡的节奏好了，下面讲EXODUS，综合类，就是支持多种区块链协议的钱包。

[https://www.exodus.com/](https://www.exodus.com/)

exodus 好像好准备上市了，综合类，支持十多条公链的钱包。

Coin, Token 很多人分不清，我简单说下：币一般是指底层公链代币，native token, 比如比特币，以太坊，波场。token一般是二层代币，就是在这些公链上面运行的智能合约代币。这些代币交易转账的时候，你需要支付底层公链代币作为矿工费。所以，你如果使用MetaMASK, TronLink 上的二层代币，需要有ETH/TRX才能使用。

提问：为什么要有token？ 跟底层公链的coin相比，token的优势是什么。

回答：好问题。终于有人问了。首先，你如果需要使用区块链，你不需要自己弄一条公链。你要的只是公开透明的账本，比如积分、比如股权、比如电影票、比如稳定币，你发行多少，每天多少链上转账，都是可以公开，你做不了假。你知道发行多少美元么？发行多少人民币么？

同学附和：一无所知

你只知道他们说了一个数字，你根本无法验证，一句无法验证的“真话”，可以当作大话处理。美联储印钞需要谁的许可？不需要，然后自己说个数就行。

今天上课缘起是因为有朋友开了机场，使用数字币支付。我教大家的目的就是让大家学会链上钱包，更好保护隐私。还有三字真言：交易所买币—-买买提！买币，买币，然后提币到自己的钱包。

最后的总结——买买提！使用自己钱包支付。

作为科普，作为布道。对于普通使用的人来说，去年5课和今天这课已经足够使用

附图：
![]()![](https://gnews.org/wp-content/uploads/2021/04/image-78.png)![]()![](https://gnews.org/wp-content/uploads/2021/04/image-79.png)
数字币支付岂止于此！未来还会支持更多。

0
